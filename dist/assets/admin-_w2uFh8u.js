var re=Object.defineProperty,le=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var ee=(i,n,s)=>n in i?re(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s,W=(i,n)=>{for(var s in n||(n={}))ce.call(n,s)&&ee(i,s,n[s]);if(Z)for(var s of Z(n))de.call(n,s)&&ee(i,s,n[s]);return i},z=(i,n)=>le(i,oe(n));var w=(i,n,s)=>new Promise((d,m)=>{var c=x=>{try{p(s.next(x))}catch(h){m(h)}},j=x=>{try{p(s.throw(x))}catch(h){m(h)}},p=x=>x.done?d(x.value):Promise.resolve(x.value).then(c,j);p((s=s.apply(i,n)).next())});import{r as g,j as e}from"./vendor-CKlhejSV.js";import{h as me}from"./html2canvas-CIV5arX1.js";import{k as se}from"./katex-DJtWuuRl.js";function _(i){if(!i)return"";try{let n=i.replace(/\$\$(.*?)\$\$/g,(s,d)=>{try{return se.renderToString(d.trim(),{displayMode:!1,throwOnError:!1,trust:!0})}catch(m){return console.warn("KaTeX display math error:",m),s}});return n=n.replace(/\$(.*?)\$/g,(s,d)=>{try{return se.renderToString(d.trim(),{displayMode:!1,throwOnError:!1,trust:!0})}catch(m){return console.warn("KaTeX inline math error:",m),s}}),n}catch(n){return console.error("LaTeX rendering error:",n),i}}function Ee(i){return w(this,null,function*(){let n;try{n=yield fetch("/api/save-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}catch(d){throw d}if(!n.ok){const d=yield n.text();throw new Error(d||"Failed to save submission")}return yield n.json()})}function he(i,n){return w(this,null,function*(){let s;try{s=yield fetch("/api/delete-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:i,timestamp:n})})}catch(d){throw d}if(!s.ok){const d=yield s.text();throw new Error(d||"Failed to delete submission")}return s.json()})}function ue(i){return w(this,null,function*(){let n;try{n=yield fetch("/api/delete-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:i})})}catch(s){throw s}if(!n.ok){const s=yield n.text();throw new Error(s||"Failed to delete student")}return n.json()})}function ge(){return w(this,null,function*(){const n=window.location.hostname==="localhost"?"/answers.json":"https://raw.githubusercontent.com/islammaruf333/100MCQ/main/answers.json";let s;try{s=yield fetch(n,{cache:"no-store"})}catch(m){throw m}if(!s.ok)throw yield s.text().catch(()=>"Could not read error"),new Error(`Failed to load submissions: ${s.status} ${s.statusText}`);return yield s.json()})}function ke(i,n=null){return w(this,null,function*(){let s;try{s=yield fetch("/api/save-pending-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:i,timestamp:n?new Date(n).toISOString():void 0})})}catch(d){throw d}if(!s.ok){const d=yield s.text();throw new Error(d||"Failed to save pending student")}return s.json()})}function $e(i){return w(this,null,function*(){let n;try{n=yield fetch("/api/remove-pending-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:i})})}catch(s){throw s}if(!n.ok){const s=yield n.text();throw new Error(s||"Failed to remove pending student")}return n.json()})}function pe(){return w(this,null,function*(){const n=window.location.hostname==="localhost"?"/pending-students.json":"https://raw.githubusercontent.com/islammaruf333/100MCQ/main/pending-students.json";let s;try{s=yield fetch(n,{cache:"no-store"})}catch(m){throw m}if(!s.ok){if(s.status===404)return[];throw yield s.text().catch(()=>"Could not read error"),new Error(`Failed to load pending students: ${s.status} ${s.statusText}`)}return yield s.json()})}function xe(){return w(this,null,function*(){const n=window.location.hostname==="localhost"?"/exam-config.json":"https://raw.githubusercontent.com/islammaruf333/100MCQ/main/exam-config.json";let s;try{s=yield fetch(n,{cache:"no-store"})}catch(m){throw m}if(!s.ok)throw new Error(`Failed to load exam configuration: ${s.status} ${s.statusText}`);return yield s.json()})}function fe(i){return w(this,null,function*(){let n;try{n=yield fetch("/api/update-exam-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}catch(s){throw s}if(!n.ok){const s=yield n.text();throw new Error(s||"Failed to update exam configuration")}return n.json()})}const je={Physics:"à¦ªà¦¦à¦¾à¦°à§à¦¥à¦¬à¦¿à¦œà§à¦žà¦¾à¦¨",Chemistry:"à¦°à¦¸à¦¾à¦¯à¦¼à¦¨",ICT:"à¦†à¦‡à¦¸à¦¿à¦Ÿà¦¿",Mathematics:"à¦—à¦£à¦¿à¦¤"};function ye({questions:i,studentAnswers:n}){const s=g.useMemo(()=>{const c={};return i.forEach(j=>{const p=j.subject||"Other";c[p]||(c[p]={total:0,correct:0,wrong:0,unanswered:0}),c[p].total++;const x=n[j.id];x==null?c[p].unanswered++:x===j.correctAnswer?c[p].correct++:c[p].wrong++}),Object.keys(c).forEach(j=>{const p=c[j];p.percentage=p.total>0?p.correct/p.total*100:0}),c},[i,n]),d=Object.keys(s).sort(),m=c=>c>=80?"excellent":c>=60?"good":c>=40?"average":"poor";return e.jsxs("div",{className:"subject-performance-chart",children:[e.jsxs("h3",{className:"chart-title bengali",children:[e.jsx("span",{className:"chart-icon",children:"ðŸ“Š"}),"à¦¬à¦¿à¦·à¦¯à¦¼à¦­à¦¿à¦¤à§à¦¤à¦¿à¦• à¦ªà¦¾à¦°à¦¦à¦°à§à¦¶à¦¿à¦¤à¦¾ à¦¬à¦¿à¦¶à§à¦²à§‡à¦·à¦£"]}),e.jsx("div",{className:"subjects-grid",children:d.map(c=>{const j=s[c],p=m(j.percentage),x=je[c]||c;return e.jsxs("div",{className:"subject-card-compact",children:[e.jsxs("div",{className:"subject-header-compact",children:[e.jsx("span",{className:"subject-name-compact bengali",children:x}),e.jsxs("span",{className:`performance-badge-compact ${p} bengali`,children:[j.percentage.toFixed(0),"%"]})]}),e.jsx("div",{className:"progress-bar-container-compact",children:e.jsx("div",{className:`progress-bar-compact ${p}`,style:{width:`${j.percentage}%`}})}),e.jsxs("div",{className:"stats-row-compact bengali",children:[e.jsxs("span",{className:"stat-item correct",title:"à¦¸à¦ à¦¿à¦•",children:["âœ“ ",j.correct]}),e.jsxs("span",{className:"stat-item wrong",title:"à¦­à§à¦²",children:["âœ— ",j.wrong]}),e.jsxs("span",{className:"stat-item total",title:"à¦®à§‹à¦Ÿ",children:["ðŸ“ ",j.total]})]})]},c)})}),e.jsxs("div",{className:"performance-summary bengali",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"à¦®à§‹à¦Ÿ à¦ªà§à¦°à¦¶à§à¦¨:"}),e.jsx("span",{className:"summary-value",children:i.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"à¦‰à¦¤à§à¦¤à¦° à¦¦à§‡à¦“à¦¯à¦¼à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡:"}),e.jsx("span",{className:"summary-value",children:Object.keys(n).length})]})]})]})}function Ne({submissions:i,onDelete:n,onDeleteStudent:s,loading:d,currentPage:m,totalPages:c,totalItems:j,itemsPerPage:p,onPageChange:x}){const[h,S]=g.useState(null),[y,A]=g.useState(null),[$,D]=g.useState([]),[R,O]=g.useState([]);g.useEffect(()=>{h&&T()},[h]);function T(){return w(this,null,function*(){try{const t=(h==null?void 0:h.questionFile)||"questions.json",r=yield fetch(`/${t}`,{cache:"no-store"});if(!r.ok)throw new Error("Failed to load questions");const o=yield r.json();D(o),yield H(t)}catch(t){console.error("Failed to load questions:",t)}})}function H(t){return w(this,null,function*(){try{let r=t.replace(".json","");r=r.replace(/\s+/g,"");const o=r+"-Answer.json";console.log("ðŸ” Loading solutions:"),console.log("  Question file:",t),console.log("  Base name:",r),console.log("  Answer file:",o),console.log("  Fetching from:",`/${o}`);const u=yield fetch(`/${o}`,{cache:"no-store"});if(console.log("  Response status:",u.status,u.ok?"âœ“":"âœ—"),console.log("  Content-Type:",u.headers.get("content-type")),!u.ok){console.log("âŒ No answer file found for:",t,"-> tried:",o),O([]);return}const f=yield u.json();O(f),console.log("âœ… Loaded solutions from:",o,"- Total solutions:",f.length)}catch(r){console.log("âŒ Could not load solutions:",r),console.log("   Error details:",r.message),O([])}})}function I(t,r){const o=typeof t=="string"?parseInt(t):t,u=$.find(f=>f.id===o||f.id.toString()===t.toString());return u?u.correctAnswer===r:null}function L(t,r){const o=typeof t=="string"?parseInt(t):t,u=$.find(v=>v.id===o||v.id.toString()===t.toString()),f=R.find(v=>v.id===o||v.id.toString()===t.toString());u&&A(z(W({},u),{studentAnswer:r,isCorrect:u.correctAnswer===r,isAnswered:r!=null,solution:(f==null?void 0:f.solution)||null}))}function N(t){return new Date(t).toLocaleString("bn-BD",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function B(t){const r=Date.now(),o=new Date(t).getTime(),u=r-o,f=Math.floor(u/(1e3*60)),v=70;return{minutes:f,isExpired:f>v,isWarning:f>50&&f<=v}}function C(){return w(this,null,function*(){try{const t=document.querySelector(".modal-content");if(!t)return;const r=t.style.maxHeight,o=t.style.overflow,u=t.style.overflowY;t.style.maxHeight="none",t.style.overflow="visible",t.style.overflowY="visible",yield new Promise(v=>setTimeout(v,100));const f=yield me(t,{backgroundColor:"#ffffff",scale:2,logging:!1,useCORS:!0,allowTaint:!0,windowHeight:t.scrollHeight,height:t.scrollHeight});t.style.maxHeight=r,t.style.overflow=o,t.style.overflowY=u,f.toBlob(v=>{if(!v)return;const F=URL.createObjectURL(v),M=document.createElement("a"),E=new Date().toLocaleString("bn-BD",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(/[/:,\s]/g,"-");M.href=F,M.download=`à¦‰à¦¤à§à¦¤à¦°-à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤-${(h==null?void 0:h.studentName)||"student"}-${E}.jpg`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(F)},"image/jpeg",.95)}catch(t){console.error("Screenshot failed:",t),alert("à¦¸à§à¦•à§à¦°à¦¿à¦¨à¦¶à¦Ÿ à¦¨à¦¿à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤ à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨à¥¤")}})}return d?e.jsx("div",{className:"data-table-container",children:e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"spinner"}),e.jsx("div",{className:"bengali",children:"à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."})]})}):i.length===0?e.jsx("div",{className:"data-table-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"ðŸ“"}),e.jsx("h3",{className:"bengali",children:"à¦•à§‹à¦¨ à¦¡à¦¾à¦Ÿà¦¾ à¦ªà¦¾à¦“à¦¯à¦¼à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿"}),e.jsx("p",{className:"bengali",children:"à¦à¦–à¦¨à¦“ à¦•à§‹à¦¨ à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦¦à§‡à¦¯à¦¼à¦¨à¦¿"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"data-table-container",children:[e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"bengali",children:"à¦¨à¦¾à¦®"}),e.jsx("th",{className:"bengali",children:"à¦†à¦‡à¦¡à¦¿"}),e.jsx("th",{className:"bengali",children:"à¦¸à§à¦•à§‹à¦°"}),e.jsx("th",{className:"bengali",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("th",{className:"bengali",children:"à¦¸à¦®à¦¯à¦¼"}),e.jsx("th",{className:"bengali",children:"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨"})]})}),e.jsx("tbody",{children:i.map((t,r)=>e.jsxs("tr",{className:t.isPending?"pending-row":"",children:[e.jsx("td",{"data-label":"à¦¨à¦¾à¦®",className:"bengali",children:t.studentName||"Unknown"}),e.jsx("td",{"data-label":"à¦†à¦‡à¦¡à¦¿",className:"bengali",children:t.studentId||"N/A"}),e.jsx("td",{"data-label":"à¦¸à§à¦•à§‹à¦°",children:t.isPending?e.jsx("span",{className:"bengali",style:{color:"#999"},children:"â€”"}):e.jsx("strong",{children:Number(t.score||0).toFixed(2)})}),e.jsx("td",{"data-label":"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸",children:t.isPending?(()=>{const o=B(t.timestamp);return o.isExpired?e.jsxs("span",{className:"status-badge",style:{backgroundColor:"#dc2626",color:"white"},children:["â±ï¸ à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ (",o.minutes," à¦®à¦¿à¦¨à¦¿à¦Ÿ)"]}):o.isWarning?e.jsxs("span",{className:"status-badge",style:{backgroundColor:"#f59e0b",color:"white"},children:["âš ï¸ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ (",o.minutes," à¦®à¦¿à¦¨à¦¿à¦Ÿ)"]}):e.jsxs("span",{className:"status-badge pending",children:["â±ï¸ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ (",o.minutes," à¦®à¦¿à¦¨à¦¿à¦Ÿ)"]})})():e.jsx("span",{className:`status-badge ${t.pass?"pass":"fail"}`,children:t.pass?"à¦ªà¦¾à¦¸":"à¦«à§‡à¦²"})}),e.jsx("td",{"data-label":"à¦¸à¦®à¦¯à¦¼",className:"bengali",children:N(t.timestamp)}),e.jsx("td",{"data-label":"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[!t.isPending&&e.jsx("button",{className:"action-button bengali",onClick:()=>S(t),children:"à¦¦à§‡à¦–à§à¦¨"}),t.isPending&&e.jsx("span",{className:"bengali",style:{color:"#999",fontSize:"12px"},children:"à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦šà¦²à¦›à§‡..."}),e.jsx("button",{className:"action-button danger bengali",onClick:()=>s(t.studentName),title:"à¦›à¦¾à¦¤à§à¦° à¦®à§à¦›à§à¦¨",children:"âœ—"})]})})]},r))})]}),e.jsxs("div",{className:"pagination",children:[e.jsxs("div",{className:"pagination-info bengali",children:["à¦¦à§‡à¦–à¦¾à¦¨à§‹ à¦¹à¦šà§à¦›à§‡ ",(m-1)*p+1," à¦¥à§‡à¦•à§‡ ",Math.min(m*p,j)," à¦Ÿà¦¿, à¦®à§‹à¦Ÿ ",j," à¦Ÿà¦¿"]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsx("button",{className:"pagination-button",onClick:()=>x(m-1),disabled:m===1,children:"â†"}),Array.from({length:Math.min(5,c)},(t,r)=>{let o;return c<=5||m<=3?o=r+1:m>=c-2?o=c-4+r:o=m-2+r,e.jsx("button",{className:`pagination-button ${m===o?"active":""}`,onClick:()=>x(o),children:o},o)}),e.jsx("button",{className:"pagination-button",onClick:()=>x(m+1),disabled:m===c,children:"â†’"})]})]})]}),h&&e.jsx("div",{className:"detail-modal",onClick:()=>S(null),children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"bengali",children:[h.studentName," - à¦‰à¦¤à§à¦¤à¦° à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤"]}),e.jsxs("div",{className:"modal-header-actions",children:[e.jsx("button",{className:"screenshot-btn bengali",onClick:C,title:"à¦¸à§à¦•à§à¦°à¦¿à¦¨à¦¶à¦Ÿ à¦¨à¦¿à¦¨",children:"ðŸ“¸ à¦¸à§à¦•à§à¦°à¦¿à¦¨à¦¶à¦Ÿ"}),e.jsx("button",{className:"close-btn",onClick:()=>S(null),children:"âœ•"})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"detail-info",children:[e.jsxs("div",{className:"info-item main-score",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à§à¦•à§‹à¦°:"}),e.jsx("span",{className:"info-value score-large",children:Number(h.score||0).toFixed(2)}),e.jsxs("span",{className:"info-suffix",children:["/ ",h.totalMarks||100]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à¦ à¦¿à¦•:"}),e.jsx("span",{className:"info-value correct",children:h.correct||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦­à§à¦²:"}),e.jsx("span",{className:"info-value wrong",children:h.wrong||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦šà§‡à¦·à§à¦Ÿà¦¾:"}),e.jsx("span",{className:"info-value",children:h.attempted||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à¦®à¦¯à¦¼:"}),e.jsx("span",{className:"info-value",children:N(h.timestamp)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸:"}),e.jsx("span",{className:`info-value ${h.pass?"pass-status":"fail-status"}`,children:h.pass?"âœ“ à¦ªà¦¾à¦¸":"âœ— à¦«à§‡à¦²"})]})]}),e.jsx(ye,{questions:$,studentAnswers:h.answers||{}}),e.jsxs("div",{className:"answers-detail",children:[e.jsxs("h3",{className:"bengali",children:["à¦‰à¦¤à§à¦¤à¦°à¦¸à¦®à§‚à¦¹ (",Object.keys(h.answers||{}).length," / ",$.length," à¦Ÿà¦¿):"]}),e.jsx("div",{className:"answers-grid",children:$.map(t=>{const r=t.id.toString(),o=(h.answers||{})[r],u=o!=null,f=u?I(r,o):null;return e.jsxs("div",{className:`answer-item ${u?f===!0?"correct-answer":f===!1?"incorrect-answer":"":"unanswered"}`,onClick:()=>L(r,o),style:{cursor:"pointer"},title:"à¦•à§à¦²à¦¿à¦• à¦•à¦°à§‡ à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¦à§‡à¦–à§à¦¨",children:[e.jsxs("span",{className:"question-id bengali",children:["à¦ªà§à¦°à¦¶à§à¦¨ ",r]}),e.jsx("span",{className:"answer-value",children:u?o:"â€”"})]},r)})})]})]})]})}),y&&e.jsx("div",{className:"question-detail-modal",onClick:()=>A(null),children:e.jsxs("div",{className:"question-modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"question-modal-header",children:[e.jsxs("h2",{className:"bengali",children:["à¦ªà§à¦°à¦¶à§à¦¨ à¦¨à¦‚ ",y.id]}),e.jsx("button",{className:"close-btn",onClick:()=>A(null),children:"âœ•"})]}),e.jsxs("div",{className:"question-modal-body",children:[e.jsxs("div",{className:"question-text bengali",children:[e.jsx("strong",{children:"à¦ªà§à¦°à¦¶à§à¦¨:"}),e.jsx("p",{dangerouslySetInnerHTML:{__html:_(y.question)}})]}),e.jsxs("div",{className:"options-list",children:[e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"A)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:_(y.options.a)}})]}),e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"B)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:_(y.options.b)}})]}),e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"C)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:_(y.options.c)}})]}),e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"D)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:_(y.options.d)}})]})]}),e.jsx("div",{className:"answer-details",children:y.isAnswered?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`student-answer ${y.isCorrect?"correct":"wrong"}`,children:[e.jsx("strong",{className:"bengali",children:"à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€à¦° à¦‰à¦¤à§à¦¤à¦°:"}),e.jsx("span",{className:"answer-badge",children:y.studentAnswer}),y.isCorrect?e.jsx("span",{className:"status-text correct bengali",children:"âœ“ à¦¸à¦ à¦¿à¦•"}):e.jsx("span",{className:"status-text wrong bengali",children:"âœ— à¦­à§à¦²"})]}),!y.isCorrect&&e.jsxs("div",{className:"correct-answer-display",children:[e.jsx("strong",{className:"bengali",children:"à¦¸à¦ à¦¿à¦• à¦‰à¦¤à§à¦¤à¦°:"}),e.jsx("span",{className:"answer-badge correct",children:y.correctAnswer})]})]}):e.jsxs("div",{className:"no-answer bengali",children:[e.jsx("strong",{children:"à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦à¦‡ à¦ªà§à¦°à¦¶à§à¦¨à§‡à¦° à¦‰à¦¤à§à¦¤à¦° à¦¦à§‡à¦¯à¦¼à¦¨à¦¿"}),e.jsxs("div",{className:"correct-answer-display",children:[e.jsx("strong",{className:"bengali",children:"à¦¸à¦ à¦¿à¦• à¦‰à¦¤à§à¦¤à¦°:"}),e.jsx("span",{className:"answer-badge correct",children:y.correctAnswer})]})]})}),y.solution&&e.jsxs("div",{className:"solution-section",children:[e.jsxs("div",{className:"solution-header bengali",children:[e.jsx("span",{className:"solution-icon",children:"ðŸ’¡"}),e.jsx("strong",{children:"à¦¸à¦®à¦¾à¦§à¦¾à¦¨/à¦¬à§à¦¯à¦¾à¦–à§à¦¯à¦¾:"})]}),e.jsx("div",{className:"solution-content bengali",dangerouslySetInnerHTML:{__html:_(y.solution)}})]})]})]})})]})}function be({message:i,type:n,onClose:s}){return g.useEffect(()=>{const d=setTimeout(()=>{s()},5e3);return()=>clearTimeout(d)},[s]),e.jsx("div",{className:`notification-toast ${n}`,children:e.jsxs("div",{className:"notification-content",children:[e.jsx("span",{className:"notification-message bengali",children:i}),e.jsx("button",{className:"notification-close",onClick:s,children:"âœ•"})]})})}function we(){var J,q,K,Y,X,G;const[i,n]=g.useState([]),[s,d]=g.useState([]),[m,c]=g.useState(!0),[j,p]=g.useState(null),[x,h]=g.useState(""),[S,y]=g.useState("all"),[A,$]=g.useState(null),[D,R]=g.useState(!1),[O,T]=g.useState(null),[H,I]=g.useState(1),L=20,[N,B]=g.useState(null),[C,t]=g.useState("type1"),[r,o]=g.useState(!1);g.useEffect(()=>{u(),F()},[]),g.useEffect(()=>{if(!D)return;const a=setInterval(()=>{u()},3e4);return()=>clearInterval(a)},[D]);function u(){return w(this,null,function*(){try{c(!0);const[a,l]=yield Promise.all([ge(),pe().catch(()=>[])]);n(a),d(l),p(null),$(new Date)}catch(a){p(a.message),console.error("Failed to load data",a)}finally{c(!1)}})}function f(a,l){return w(this,null,function*(){if(window.confirm(`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ ${a} à¦à¦° à¦‰à¦¤à§à¦¤à¦° à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦šà¦¾à¦¨?

à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦ªà§‚à¦°à§à¦¬à¦¾à¦¬à¦¸à§à¦¥à¦¾à¦¯à¦¼ à¦«à§‡à¦°à¦¾à¦¨à§‹ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤`))try{yield he(a,l),yield u(),T({message:`${a} à¦à¦° à¦‰à¦¤à§à¦¤à¦° à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡`,type:"success"})}catch(b){console.error("Delete failed:",b),T({message:`à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡: ${b.message}`,type:"error"})}})}function v(a){return w(this,null,function*(){if(window.confirm(`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ ${a} à¦à¦° à¦¸à¦•à¦² à¦‰à¦¤à§à¦¤à¦° à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦šà¦¾à¦¨?

à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦ªà§‚à¦°à§à¦¬à¦¾à¦¬à¦¸à§à¦¥à¦¾à¦¯à¦¼ à¦«à§‡à¦°à¦¾à¦¨à§‹ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤`))try{yield ue(a),yield u(),T({message:`${a} à¦à¦° à¦¸à¦•à¦² à¦‰à¦¤à§à¦¤à¦° à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡`,type:"success"})}catch(l){console.error("Delete failed:",l),T({message:`à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡: ${l.message}`,type:"error"})}})}function F(){return w(this,null,function*(){try{const a=yield xe();B(a),t(a.currentType||"type1")}catch(a){console.error("Failed to load exam config:",a),T({message:`à¦•à¦¨à¦«à¦¿à¦—à¦¾à¦°à§‡à¦¶à¦¨ à¦²à§‹à¦¡ à¦•à¦°à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡: ${a.message}`,type:"error"})}})}function M(){return w(this,null,function*(){if(window.confirm(`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦ªà¦°à§€à¦•à§à¦·à¦¾à¦° à¦§à¦°à¦¨ ${C==="type1"?"Type 1 (à§®à§¦ à¦ªà§à¦°à¦¶à§à¦¨)":"Type 2 (à§¨à§« à¦ªà§à¦°à¦¶à§à¦¨)"} à¦ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦¨?`))try{o(!0),yield fe({currentType:C}),yield F(),T({message:`à¦ªà¦°à§€à¦•à§à¦·à¦¾à¦° à¦§à¦°à¦¨ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ ${C==="type1"?"Type 1 (à§®à§¦ à¦ªà§à¦°à¦¶à§à¦¨)":"Type 2 (à§¨à§« à¦ªà§à¦°à¦¶à§à¦¨)"} à¦ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¿à¦¤ à¦¹à¦¯à¦¼à§‡à¦›à§‡`,type:"success"})}catch(a){console.error("Failed to update exam config:",a),T({message:`à¦•à¦¨à¦«à¦¿à¦—à¦¾à¦°à§‡à¦¶à¦¨ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡: ${a.message}`,type:"error"})}finally{o(!1)}})}const E=g.useMemo(()=>{const a={};return i.forEach(l=>{const b=l.studentId||l.studentName;(!a[b]||new Date(l.timestamp)>new Date(a[b].timestamp))&&(a[b]=l)}),s.forEach(l=>{const b=l.studentName;if(!a[b]){const P=Date.now(),k=new Date(l.timestamp).getTime(),U=P-k,V=Math.floor(U/(1e3*60)),ie=70;a[b]=z(W({},l),{studentName:l.studentName,timestamp:l.timestamp,status:"Pending",isPending:!0,isExpired:V>ie,elapsedMinutes:V})}}),Object.values(a)},[i,s]),Q=g.useMemo(()=>{let a=E;if(x){const l=x.toLowerCase();a=a.filter(b=>{var P,k;return((P=b.studentName)==null?void 0:P.toLowerCase().includes(l))||((k=b.studentId)==null?void 0:k.toLowerCase().includes(l))})}return S==="pending"?a=a.filter(l=>l.isPending===!0&&!l.isExpired):S==="timeout"?a=a.filter(l=>l.isPending===!0&&l.isExpired===!0):S==="pass"?a=a.filter(l=>!l.isPending&&l.pass===!0):S==="fail"?a=a.filter(l=>!l.isPending&&l.pass===!1):S==="all"&&(a=a.filter(l=>!l.isExpired)),a=a.sort((l,b)=>l.isPending&&!b.isPending?-1:!l.isPending&&b.isPending?1:new Date(b.timestamp)-new Date(l.timestamp)),a},[E,x,S]),te=Math.ceil(Q.length/L),ne=Q.slice((H-1)*L,H*L),ae=g.useMemo(()=>{const a=E.length,l=E.filter(k=>k.pass).length,b=a-l,P=a>0?(E.reduce((k,U)=>k+(U.score||0),0)/a).toFixed(1):0;return{total:a,passed:l,failed:b,avgScore:P}},[E]);return j?e.jsx("div",{className:"admin-page",children:e.jsxs("div",{className:"error-state",children:[e.jsx("h2",{className:"bengali",children:"à¦²à§‹à¦¡ à¦•à¦°à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡"}),e.jsx("p",{children:j}),e.jsx("button",{onClick:u,className:"export-button",children:"à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨"})]})}):e.jsxs("div",{className:"admin-page",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{className:"bengali",children:"à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦¡à¦¾à¦Ÿà¦¾à¦¬à§‡à¦¸"}),e.jsxs("div",{className:"admin-header-right",children:[e.jsxs("div",{className:"stats-badge bengali",children:["à¦®à§‹à¦Ÿ: ",e.jsx("strong",{children:ae.total})]}),e.jsx("button",{className:`icon-button ${D?"active":""}`,onClick:()=>R(!D),title:D?"à¦…à¦Ÿà§‹ à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦šà¦¾à¦²à§":"à¦…à¦Ÿà§‹ à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦¬à¦¨à§à¦§",children:"ðŸ”„"}),e.jsx("button",{className:"icon-button",onClick:u,title:"à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦•à¦°à§à¦¨",disabled:m,children:"â†»"})]})]}),N&&e.jsxs("div",{className:"admin-config-section",style:{backgroundColor:"var(--card-bg)",padding:"20px",borderRadius:"12px",marginBottom:"24px",border:"1px solid var(--border-color)"},children:[e.jsx("h2",{className:"bengali",style:{marginTop:0,marginBottom:"16px",fontSize:"18px"},children:"à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦•à¦¨à¦«à¦¿à¦—à¦¾à¦°à§‡à¦¶à¦¨"}),e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[e.jsx("label",{className:"bengali",style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨ à¦ªà¦°à§€à¦•à§à¦·à¦¾à¦° à¦§à¦°à¦¨:"}),e.jsxs("select",{className:"filter-select bengali",value:C,onChange:a=>t(a.target.value),disabled:r,style:{width:"100%"},children:[e.jsx("option",{value:"type1",children:((J=N.type1)==null?void 0:J.label)||"Type 1: à§®à§¦ à¦ªà§à¦°à¦¶à§à¦¨ - à§¬à§¦ à¦®à¦¿à¦¨à¦¿à¦Ÿ"}),e.jsx("option",{value:"type2",children:((q=N.type2)==null?void 0:q.label)||"Type 2: à§¨à§« à¦ªà§à¦°à¦¶à§à¦¨ - à§§à§®:à§ªà§« à¦®à¦¿à¦¨à¦¿à¦Ÿ"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("button",{className:"export-button bengali",onClick:M,disabled:r||C===N.currentType,style:{opacity:r||C===N.currentType?.5:1,cursor:r||C===N.currentType?"not-allowed":"pointer"},children:r?"â³ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¹à¦šà§à¦›à§‡...":"ðŸ’¾ à¦•à¦¨à¦«à¦¿à¦—à¦¾à¦°à§‡à¦¶à¦¨ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨"}),C!==N.currentType&&e.jsx("small",{className:"bengali",style:{color:"var(--warning)",fontSize:"12px"},children:"à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦¸à¦‚à¦°à¦•à§à¦·à¦¿à¦¤ à¦¹à¦¯à¦¼à¦¨à¦¿"})]}),e.jsxs("div",{style:{flex:"1",minWidth:"250px",padding:"12px",backgroundColor:"var(--gray-50)",borderRadius:"8px"},children:[e.jsx("div",{className:"bengali",style:{marginBottom:"4px",fontSize:"12px",color:"var(--gray-600)"},children:"à¦¸à¦•à§à¦°à¦¿à¦¯à¦¼ à¦•à¦¨à¦«à¦¿à¦—à¦¾à¦°à§‡à¦¶à¦¨:"}),e.jsx("div",{className:"bengali",style:{fontSize:"14px",fontWeight:"600",color:"var(--primary)"},children:(K=N[N.currentType])==null?void 0:K.label}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--gray-600)",marginTop:"4px"},children:["à¦ªà§à¦°à¦¶à§à¦¨: ",(Y=N[N.currentType])==null?void 0:Y.totalQuestions," | à¦¸à¦®à¦¯à¦¼: ",Math.floor(((X=N[N.currentType])==null?void 0:X.durationSeconds)/60)," à¦®à¦¿à¦¨à¦¿à¦Ÿ | à¦ªà¦¾à¦¸ à¦®à¦¾à¦°à§à¦•: ",(G=N[N.currentType])==null?void 0:G.passMark]})]})]})]}),e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{type:"text",className:"search-input bengali",placeholder:"à¦¨à¦¾à¦® à¦¬à¦¾ à¦†à¦‡à¦¡à¦¿ à¦¦à¦¿à¦¯à¦¼à§‡ à¦–à§à¦à¦œà§à¦¨...",value:x,onChange:a=>h(a.target.value)}),e.jsxs("select",{className:"filter-select bengali",value:S,onChange:a=>y(a.target.value),children:[e.jsx("option",{value:"all",children:"à¦¸à¦•à¦² à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("option",{value:"pending",children:"à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚"}),e.jsx("option",{value:"timeout",children:"à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ"}),e.jsx("option",{value:"pass",children:"à¦ªà¦¾à¦¸"}),e.jsx("option",{value:"fail",children:"à¦«à§‡à¦²"}),e.jsx("option",{value:"all-including-expired",children:"à¦¸à¦¬ (à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ à¦¸à¦¹)"})]}),e.jsx("button",{className:"export-button bengali",onClick:()=>alert("Export feature coming soon!"),children:"ðŸ“¥ Export CSV"})]}),e.jsx(Ne,{submissions:ne,onDelete:f,onDeleteStudent:v,loading:m,currentPage:H,totalPages:te,totalItems:Q.length,itemsPerPage:L,onPageChange:I})]}),O&&e.jsx(be,{message:O.message,type:O.type,onClose:()=>T(null)})]})}const De=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));export{De as A,$e as a,ke as b,xe as l,_ as r,Ee as s};
